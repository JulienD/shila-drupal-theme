/**
 * @file
 * molecules/components/shila-card/_shila-card-layout.scss
 */

/// @param $outer-cols
///   Column span of parent element.
/// @param $layout-type
///   Either 'vertical' or 'horizontal'.
/// @param $gutter
///   Gutter size of parent element.
@mixin card-layout(
  $outer-cols, $layout-type: 'vertical', $gutter: $gutter
) {
  $scaled-gutter: $gutter / ($outer-cols / 4);
  @include layout(4) {
    @if ($layout-type == 'horizontal') {
      .card__image {
        @include grid-span(1, 1, $gutter: $scaled-gutter);
      }
      .card__body {
        @include grid-span(3, 2, $gutter: $scaled-gutter);
      }
    } @else {
      .card__image {
        @include grid-span(4, 1, $gutter: $scaled-gutter);
        &:not(:empty) {
          margin-bottom: $small-spacing;
        }
      }
      .card__body {
        @include isolation-span(4, 1, 'both', $gutter: $scaled-gutter);
      }
    }
  }
}

/// Breakpoint-based card layout.
///
/// @param {List} $outer-cols [$cols-list]
///   Column span of parent element in one or more breakpoint.
/// @param {List} $layouts
///   Layout to use in respective breakpoints.
@mixin card-breakpoint-layout(
  $outer-cols: $shila-columns, $layouts: ('xs': 'vertical', 's': 'horizontal', 'm': 'horizontal', 'l': 'horizontal')
) {
  @each $breakpoint-key, $columns in $outer-cols {
    @include breakpoint(shila-breakpoint($breakpoint-key)) {
      @include card-layout($columns, map-get($layouts, $breakpoint-key));
    }
  }
}
